<!DOCTYPE html>
<html lang="zh-TW">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Nuvayae LIFF 問卷</title>
</head>
<body>
    <div id="app">
        <form id="bindingForm">
            <label>請問您的姓名：</label><br>
            <input type="text" id="name" required><br><br>

            <label>請問您的連絡電話：</label><br>
            <input type="text" id="phone" required><br><br>

            <label>門市地址：</label><br>
            <select id="store">
                <option value="A">A門市</option>
                <option value="B">B門市</option>
            </select><br><br>

            <button type="button" id="submitBtn">送出表單</button>
        </form>
        <p id="status"></p>
    </div>

    <script type="module">
        import liff from "@line/liff";

        // 初始化 LIFF
        async function initLiff() {
            try {
                await liff.init({ liffId: "2009177086-5AGq54Qb" });
                if (!liff.isLoggedIn()) {
                    liff.login();
                } else {
                    console.log("LIFF 已啟動");
                }
            } catch (err) {
                console.error("LIFF 初始化失敗", err);
            }
        }

        // 送出表單到 GAS
        async function submitForm() {
            const name = document.getElementById('name').value;
            const phone = document.getElementById('phone').value;
            const profile = await liff.getProfile(); // 取得 UID

            const formData = new URLSearchParams();
            formData.append('name', name);
            formData.append('phone', phone);
            formData.append('userid', profile.userId);

            fetch('你的GAS_API網址_填在這裡', {
                method: 'POST',
                body: formData,
                mode: 'no-cors' // 避免跨網域錯誤
            }).then(() => {
                alert('資料已送出！');
            }).catch(err => console.error(err));
        }

        document.getElementById('submitBtn').addEventListener('click', submitForm);
        initLiff();
    </script>
</body>
</html>
